# Z.AI UserScripts

Z.AI関連サイトで動作するUserScriptをまとめたディレクトリです。

## billing_aggregator

Z.AIのAPI使用料請求ページで、複数ページにまたがるデータを集計・分析するツールです。

### 機能

- **データ集計**: 現在表示されているページのAPI使用料データを収集
- **複数ページ対応**: 次ページに移動して追加集計が可能
- **重複防止**: 同じデータの重複集計を自動的に防止
- **LocalStorage保存**: 集計データをブラウザに保存し、リロード後も保持
- **フィルタリング機能**: API Key、請求日、課金タイプでデータをフィルタリング
- **TOTAL行**: API Keyと請求日の組み合わせごとにOUTPUT、CACHE、INPUTの合計値を自動計算
- **ソート機能**: ヘッダーをクリックして各列でソート可能
- **総計表示**: 全データのAPI Calls、使用量、請求額の合計を表示
- **リセット機能**: 保存されたデータをクリアするリセットボタン
- **ポップアップ通知**: 操作結果を3秒間のポップアップで表示

### 使い方

1. Z.AIの請求ページ（https://z.ai/manage-apikey/billing）にアクセス
2. 画面中央上に表示されるボタン群:
   - **📊 集計**: 現在ページのデータを収集
   - **📋 結果表示**: 集計結果を表形式で表示
   - **🔄 リセット**: 保存されたデータをすべてクリア
3. 集計後、「次ページ」に移動して再度「📊 集計」をクリックするとデータが追加される
4. 「📋 結果表示」で集計結果を確認
5. ヘッダークリックでソート、表内のAPI Key/請求日/課金タイプクリックでフィルタリング

### 対象データ

- API Key
- 請求日
- 課金タイプ（OUTPUT、CACHE、INPUT）
- 使用量
- 請求額
- API Calls

### 特徴

- **自動保存**: LocalStorageにデータが自動保存されるため、ページをリロードしてもデータが保持されます
- **重複チェック**: 同じAPI Key、請求日、課金タイプの組み合わせは重複して集計されません
- **柔軟なフィルタリング**: 表内の値をクリックするだけで簡単にデータを絞り込みできます
- **TOTAL機能**: 各API Keyと請求日の組み合わせでOUTPUT、CACHE、INPUTの合計値が自動計算されます